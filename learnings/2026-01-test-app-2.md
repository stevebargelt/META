# Project Retrospective: test-app-2

**Date:** 2026-01-27
**Duration:** 1h 05m 46s (pipeline)
**Status:** Completed

## What We Built

Production-quality TODO app with authentication, Supabase integration, CRUD endpoints, and tests. Built via the META orchestration pipeline with early setup and quality gates.

**Key features/components:**
- Auth (Supabase JWT)
- Supabase integration
- Tasks CRUD
- Server/client tests

## What Worked

### Agent Usage
- Multi-agent flow was smoother; outputs were more complete (README, SETUP, migrations).
- App starts successfully at the end of the pipeline.

### Technical Choices
- Express + Zod validation stack.
- Supabase JWT auth + migrations.
- Vite + React for client.
- Vitest + Supertest for tests.

### Process Wins
- No major errors this run; only a minor issue at the start.
- Much quicker end-to-end (~1h 05m).
- External service setup + DoD gates produced README.md, docs/SETUP.md, and Supabase migrations.

## What Didn't Work

### Agent Issues
- No agent issues noted.

### Technical Challenges
- App errors on startup; likely not fully validated end-to-end.
- Tests may not have actually run or been verified.
- CI pipeline is minimal; no CD pipeline despite goal.
- No OpenAPI spec generated despite preference.
- No observability/traceability (no correlation IDs).

### Process Problems
- Approval prompts still lacked enough detail to know what was being approved.
- No git commits or pushes (confirmed; no commits and no remotes).
- No parallelism despite being possible; rationale recorded but weak.

## Patterns Added to META

- `patterns/deployment/supabase-setup.md` — Supabase local/hosted setup guide
- `patterns/deployment/supabase-initial-schema.sql` — Profiles + todos schema with RLS
- `patterns/project-structures/readme-supabase-next.md` — README structure for Next.js + Supabase apps

## Agent Evolution

### Updates Made
- None in this run.

### New Learnings
- Contract stub (OpenAPI) must be enforced before any parallelization.
- Observability baseline (correlation IDs) still missing and should be required before final approval.

## Model Performance

| Task | Model Used | Rating | Notes |
|------|------------|--------|-------|
| End-to-end pipeline | Claude | ⭐⭐⭐ | Smooth run, faster, outputs more complete |

## Metrics

- **Time saved:** Many hours (possibly days)
- **Iterations:** 1 main run
- **Context resets:** 0
- **Model switches:** 0

## Key Decisions

| Decision | Approach Chosen | Rationale | Outcome |
|----------|----------------|-----------|---------|
| [What] | [Choice] | [Why] | [Result] |

## Reusable Assets

- Code patterns: Supabase migration skeleton (moved to patterns/)
- Docs: Supabase setup guide (moved to patterns/)
- README structure (moved to patterns/)

## Would Do Differently

1. Enforce OpenAPI contract stub creation — prevent missing API spec.
2. Block completion without observability baseline (correlation IDs + structured logs).
3. Require a stronger CI/CD pipeline (not just minimal CI stub).

## Would Do Same

1. Keep early external service setup step — improved setup quality.
2. Keep definition-of-done gate — catches missing artifacts earlier.

## Next Steps

- [x] Update `learnings/what-doesnt.md` with “missing OpenAPI spec despite requirement”
- [x] Update `learnings/what-doesnt.md` with “missing observability baseline”
- [x] Add patterns to `patterns/` if applicable

## Notes for Future Projects

- Verify startup before declaring completion.
